{% extends 'base.html' %}
{% block title %}Enquêter sur la Réclamation{% endblock %}
{% block extra_head %}
        body {
            background-image: linear-gradient(to bottom right, #8C1F28, #D92525) !important;
        }
        main {
            padding: 0; /* Remove padding for full-width content */
        }
{% endblock %}
{% block content %}
<div class="flex items-center justify-center py-12" syle="height:fit-content; min-height: 75vh;">
    <div class="glass p-8 rounded-2xl shadow-2xl w-full max-w-md animate-fade-in-up">
        <h1 class="text-3xl font-bold text-center text-[#044040] mb-6">Enquêter sur la Réclamation</h1>
        <p class="text-[#000000]/80 mb-4">Citoyen: {{ reclamation.citizen.username }}</p>
        <p class="text-[#000000]/80 mb-4">Possession: {{ reclamation.possession.possession_type.name }}</p>
        <p class="text-[#000000]/80 mb-4">Raison: {{ reclamation.reason }}</p>
        <p class="text-[#000000]/80 mb-4">Preuves: {{ reclamation.evidence_description|default:"Aucune" }}</p>
        <form method="post" class="space-y-6">
            {% csrf_token %}
            <div>
                <label for="notes" class="block text-sm font-medium text-[#000000]">Notes d'investigation</label>
                <textarea name="notes" id="notes" required 
                          class="mt-1 block w-full p-3 bg-[#F2F2F2]/10 border border-[#000000] rounded-lg text-[#000000] placeholder-[#000000]/50 focus:outline-none focus:ring-2 focus:ring-[#044040] focus:border-transparent transition-all duration-300"></textarea>
            </div>
            <div>
                <label for="action" class="block text-sm font-medium text-[#000000]">Action</label>
                <select name="action" id="action" required 
                        class="mt-1 block w-full p-3 bg-[#F2F2F2]/10 border border-[#000000] rounded-lg text-[#000000] focus:outline-none focus:ring-2 focus:ring-[#044040] focus:border-transparent transition-all duration-300 hover-scale">
                    <option value="approve">Approuver (Supprimer la possession)</option>
                    <option value="reject">Rejeter (Appliquer une amende)</option>
                </select>
            </div>
            <div id="fine_amount_div" class="hidden">
                <label for="fine_amount" class="block text-sm font-medium text-[#000000]">Montant de l'amende (MAD)</label>
                <input type="number" step="0.01" name="fine_amount" id="fine_amount" 
                       class="mt-1 block w-full p-3 bg-[#F2F2F2]/10 border border-[#000000] rounded-lg text-[#000000] placeholder-[#000000]/50 focus:outline-none focus:ring-2 focus:ring-[#044040] focus:border-transparent transition-all duration-300 hover-scale">
            </div>
            <button type="submit" 
                    class="w-full bg-gradient-to-r from-[#D92525] to-[#8C1F28] text-[#F2F2F2] p-3 rounded-lg font-semibold hover:from-[#591C21] hover:to-[#D92525] transition-all duration-300 hover-scale animate-pulse">
                Soumettre la décision
            </button>
        </form>
    </div>
</div>
<script>
    document.getElementById('action').addEventListener('change', function() {
        const fineAmountDiv = document.getElementById('fine_amount_div');
        if (this.value === 'reject') {
            fineAmountDiv.classList.remove('hidden');
            document.getElementById('fine_amount').required = true;
        } else {
            fineAmountDiv.classList.add('hidden');
            document.getElementById('fine_amount').required = false;
        }
    });
</script>
{% endblock %}
