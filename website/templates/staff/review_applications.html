{% extends 'base.html' %}
{% block title %}Examen des demandes{% endblock %}
{% block extra_head %}
        body {
            background-image: linear-gradient(to bottom right, #8C1F28, #D92525) !important;
        }
        main {
            padding: 0;
        }
{% endblock %}
{% block content %}
<div class="flex items-center justify-center py-12" style="height: fit-content; min-height: 75vh;">
    <div class="glass p-8 rounded-2xl shadow-2xl w-full max-w-4xl animate-fade-in-up">
        <h1 class="text-3xl font-bold text-center text-[#044040] mb-6">Examen des demandes</h1>
        {% if messages %}
            <div class="mb-6 space-y-3">
                {% for message in messages %}
                    <div class="{% if message.tags == 'success' %}bg-green-100 text-green-800 border-green-400{% elif message.tags == 'info' %}bg-blue-100 text-blue-800 border-blue-400{% else %}bg-red-100 text-red-800 border-red-400{% endif %} p-4 rounded-xl border shadow-lg animate-fade-in-up">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}
        {% if applications %}
            <table class="w-full border-collapse">
                <thead>
                    <tr class="bg-[#F2F2F2]/10">
                        <th class="p-3 text-left text-[#044040] font-semibold">Citoyen</th>
                        <th class="p-3 text-left text-[#044040] font-semibold">Programme</th>
                        <th class="p-3 text-left text-[#044040] font-semibold">Indicateur social</th>
                        <th class="p-3 text-left text-[#044040] font-semibold">Seuil</th>
                        <th class="p-3 text-left text-[#044040] font-semibold">Date de soumission</th>
                        <th class="p-3 text-left text-[#044040] font-semibold">Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for application in applications %}
                        <tr class="border-b border-[#F2F2F2]/20 hover:bg-[#F2F2F2]/20 transition-all duration-300">
                            <td class="p-3 text-[#000000]/80">{{ application.citizen.username }}</td>
                            <td class="p-3 text-[#000000]/80">
                                {% if application.program_type == 'amo' %}AMO{% else %}Aide Sociale{% endif %}
                            </td>
                            <td class="p-3 text-[#000000]/80">{{ application.social_indicator_at_submission|floatformat:2 }}</td>
                            <td class="p-3 text-[#000000]/80">{{ application.threshold_at_submission|floatformat:2 }}</td>
                            <td class="p-3 text-[#000000]/80">{{ application.submitted_at|date:"d/m/Y H:i" }}</td>
                            <td class="p-3">
                                <a href="{% url 'review_application' application.id %}" 
                                   class="text-[#D92525] hover:underline font-semibold hover-scale">Examiner</a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        {% else %}
            <p class="text-[#000000]/80 text-center">Aucune demande soumise à examiner.</p>
        {% endif %}
        <div class="mt-6 flex space-x-4 justify-center">
            <a href="{% url 'staff_dashboard' %}" 
               class="bg-gradient-to-r from-[#D92525] to-[#8C1F28] text-[#F2F2F2] px-4 py-2 rounded-lg font-semibold hover:from-[#591C21] hover:to-[#D92525] transition-all duration-300 hover-scale animate-pulse">
                Retour au tableau de bord
            </a>
            <a href="{% url 'logout' %}" 
               class="bg-gradient-to-r from-[#591C21] to-[#8C1F28] text-[#F2F2F2] px-4 py-2 rounded-lg font-semibold hover:from-[#591C21] hover:to-[#D92525] transition-all duration-300 hover-scale animate-pulse">
                Déconnexion
            </a>
        </div>
    </div>
</div>
{% endblock %}
