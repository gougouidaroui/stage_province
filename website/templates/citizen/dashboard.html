{% extends 'base.html' %}
{% block title %}Tableau de Bord - Citoyen{% endblock %}
{% block extra_head %}
        body {
            background-image: linear-gradient(to bottom right, #8C1F28, #D92525) !important;
        }
        main {
            padding: 0;
        }
{% endblock %}
{% block content %}
<div class="flex items-center justify-center py-12" style="height:fit-content; min-height: 75vh;">
    <div class="glass p-8 rounded-2xl shadow-2xl w-full max-w-4xl animate-fade-in-up">
        <h1 class="text-4xl font-bold text-center text-[#044040] mb-8">Bienvenue, {{ user.first_name }} {{ user.last_name }}</h1>
        
        <!-- Stats Grid -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
            <div class="glass p-6 rounded-xl shadow-xl hover-scale animate-fade-in-up">
                <h2 class="text-lg font-semibold text-[#044040]">Indicateur Social</h2>
                <p class="text-3xl font-bold text-[#D92525]">{{ current_score|floatformat:2 }}</p>
                <p class="text-sm text-[#000000]/80">Dernière mise à jour: {{ profile.last_calculated|date:"d/m/Y" }}</p>
            </div>
            <div class="glass p-6 rounded-xl shadow-xl hover-scale animate-fade-in-up">
                <h2 class="text-lg font-semibold text-[#044040]">Éligibilité AMO</h2>
                <p class="{% if amo_eligible %}text-green-500{% else %}text-red-500{% endif %} font-bold text-xl">
                    {% if amo_eligible %}Éligible{% else %}Non éligible{% endif %}
                </p>
                <p class="text-sm text-[#000000]/80">Seuil: {{ amo_threshold|floatformat:2 }}</p>
            </div>
            <div class="glass p-6 rounded-xl shadow-xl hover-scale animate-fade-in-up">
                <h2 class="text-lg font-semibold text-[#044040]">Éligibilité Aide Sociale</h2>
                <p class="{% if social_aid_eligible %}text-green-500{% else %}text-red-500{% endif %} font-bold text-xl">
                    {% if social_aid_eligible %}Éligible{% else %}Non éligible{% endif %}
                </p>
                <p class="text-sm text-[#000000]/80">Seuil: {{ social_aid_threshold|floatformat:2 }}</p>
            </div>
        </div>
        
        <!-- Possessions -->
        <div class="glass p-8 rounded-xl shadow-xl mb-12">
            <h2 class="text-2xl font-semibold text-[#044040] mb-6">Possessions Récentes</h2>
            {% if recent_possessions %}
                <ul class="space-y-4">
                    {% for possession in recent_possessions %}
                        <li class="bg-[#F2F2F2]/10 p-4 rounded-lg hover:bg-[#F2F2F2]/20 transition-all duration-300 hover-scale">
                            <p class="font-medium text-[#D92525]">{{ possession.possession_type.name }}</p>
                            <p class="text-sm text-[#000000]/80">Valeur: {{ possession.estimated_value|floatformat:2 }} MAD</p>
                            <p class="text-sm text-[#000000]/80">Date d'acquisition: {{ possession.acquisition_date|date:"d/m/Y" }}</p>
                            <p class="text-sm {% if possession.status == 'active' %}text-green-500{% else %}text-yellow-500{% endif %}">
                                Statut: {{ possession.get_status_display }}
                            </p>
                            {% if possession.status == 'active' %}
                                <a href="{% url 'create_reclamation' possession.id %}" 
                                   class="mt-2 inline-block text-sm text-[#D92525] hover:underline">Créer une Réclamation</a>
                            {% endif %}
                        </li>
                    {% endfor %}
                </ul>
            {% else %}
                <p class="text-[#000000]/80">Aucune possession enregistrée.</p>
            {% endif %}
        </div>
        
        <!-- Quick Actions -->
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
            <a href="{% url 'eligibility_calculator' %}" 
               class="bg-gradient-to-r from-[#8C1F28] to-[#D92525] text-[#F2F2F2] p-6 rounded-xl text-center hover-scale transition-all duration-300 animate-pulse">
                <h3 class="text-lg font-semibold">Calculateur d'Éligibilité</h3>
                <p class="text-sm text-[#F2F2F2]/80">Vérifiez votre éligibilité aux programmes</p>
            </a>
            <a href="{% url 'create_application' program_type='amo' %}" 
               class="bg-gradient-to-r from-[#D92525] to-[#591C21] text-[#F2F2F2] p-6 rounded-xl text-center hover-scale transition-all duration-300 animate-pulse">
                <h3 class="text-lg font-semibold">Demander AMO</h3>
                <p class="text-sm text-[#F2F2F2]/80">Soumettre une demande pour AMO</p>
            </a>
            <a href="{% url 'create_application' program_type='social_aid' %}" 
               class="bg-gradient-to-r from-[#591C21] to-[#8C1F28] text-[#F2F2F2] p-6 rounded-xl text-center hover-scale transition-all duration-300 animate-pulse">
                <h3 class="text-lg font-semibold">Demander Aide Sociale</h3>
                <p class="text-sm text-[#F2F2F2]/80">Soumettre une demande pour aide sociale</p>
            </a>
        </div>
    </div>
</div>
{% endblock %}
